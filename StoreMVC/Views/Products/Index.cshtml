@model IEnumerable<StoreMVC.Models.Product>

@{
	Layout = "~/Views/Shared/_Layout.cshtml";
}

<!DOCTYPE html>

<html>
<head>
	<meta name="viewport" content="width=device-width" />
	<title>Index</title>
</head>
<body>
	@{
		var options = new AjaxOptions()
		{
			UpdateTargetId = "tabledata",
			Url = Url.Action("_ProductsData")
		};
	}
	@using (Ajax.BeginForm(options))
	{
		<div id="loadingIndicator" style="display:none;">Loading...</div>
		<table class="table">
			<thead>
				<tr>
					<th>
						@Html.DisplayNameFor(model => model.Name)
					</th>
					<th>
						@Html.DisplayNameFor(model => model.Description)
					</th>
					<th>
						@Html.DisplayNameFor(model => model.Price)
					</th>
					<th>
						@Html.DisplayNameFor(model => model.Category)
					</th>
					<th></th>
				</tr>
			</thead>

			<tbody id="tabledata">
				@Html.Action("ProductsDataPartial")
			</tbody>
		</table>
		@Ajax.ActionLink("Refresh", "_ProductsData", new AjaxOptions
		   {
			   UpdateTargetId= "tabledata",
			   LoadingElementId= "loadingIndicator"
		   })
	}
	<div style="margin-right: 5px; float: left;">
		@Html.ActionLink("Create New", "Create")
	</div>

	@section scripts
		{
		@*Ненавязивый JavaScript для выполнения запроса на сервер без полного обновления страницы*@
		<script src="~/Scripts/jquery.unobtrusive-ajax.min.js"></script>
	}
</body>
</html>
