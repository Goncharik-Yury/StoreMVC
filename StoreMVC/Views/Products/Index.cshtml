@model IEnumerable<StoreMVC.Models.Product>

@{
	Layout = "~/Views/Shared/_Layout.cshtml";
}

<!DOCTYPE html>

<html>
<head>
	<meta name="viewport" content="width=device-width" />
	<title>Index</title>
</head>
<body>
	@{
		var ajaxOptions = new AjaxOptions()
		{
			UpdateTargetId = "tabledata",
			Url = Url.Action("ProductsDataPartial"),
			LoadingElementId = "loadingIndicator",
			OnFailure = "OnFailure",
		};
	}
	@*@if (User.IsInRole("Moderator") || User.IsInRole("Admin"))
		{*@
	<span style="margin-right: 5px; float: left;">
		@Html.ActionLink("Add", "Create")
	</span>
	@*  }*@

	&nbsp;&nbsp;
	<span>
		@Ajax.ActionLink("Refresh", "ProductsDataPartial", ajaxOptions)
	</span>
	&nbsp;&nbsp;
	<span id="loadingIndicator" style="display:none; color: orange">Loading...</span>
	<br /><br /><br />
	@using (Ajax.BeginForm(ajaxOptions))
	{
		<table class="table">
			@*<thead>
					<tr>
						<th>
							@Html.DisplayNameFor(model => model.imgName)
						</th>
						<th>
							@Html.DisplayNameFor(model => model.Name)
						</th>
						<th>
							@Html.DisplayNameFor(model => model.Description)
						</th>
						<th>
							@Html.DisplayNameFor(model => model.Price)
						</th>
						<th>
							@Html.DisplayNameFor(model => model.Category)
						</th>
					</tr>
				</thead>*@

			<tbody id="tabledata">
				@Html.Action("ProductsDataPartial")
			</tbody>
		</table>
	}

	@*@section styles
		{
			<link href="~/content/gridStyle.css" rel="stylesheet" />
		}

		@{
			var grid = new WebGrid(source: Model, rowsPerPage: 6);
		}

		@grid.GetHtml(htmlAttributes: new { cellpadding = "66px", cellspacing = "60px" })*@

	@section scripts
		{
		@*Ненавязивый JavaScript для выполнения запроса на сервер без полного обновления страницы*@
		<script src="~/Scripts/jquery.unobtrusive-ajax.min.js"></script>
	}
	<script type="text/javascript">
		function OnFailure(request, error) {
			alert("Some error appear:\n" + error);
		}
	</script>
</body>
</html>
